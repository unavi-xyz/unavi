[workspace]
members  = ["crates/*", "wasm/*"]
resolver = "2"

[workspace.package]
edition    = "2024"
license    = "MPL-2.0"
repository = "https://github.com/unavi-xyz/unavi"
version    = "0.0.11"

[workspace.lints.clippy]
too_many_arguments = "allow"
type_complexity    = "allow"

[workspace.metadata.release]
publish        = false
shared-version = true
tag-name       = "v{{version}}"

[workspace.dependencies]
anyhow             = "1.0.100"
avian3d            = "0.4.1"
bevy               = "0.17.2"
bevy_async_task    = "0.9.0"
bevy_gltf_kun      = { git = "https://github.com/unavi-xyz/gltf_kun" }
bevy_vrm           = { git = "https://github.com/unavi-xyz/bevy_vrm" }
bincode            = "2.0.1"
clap               = { features = ["derive"], version = "4.5.51" }
constcat           = "0.6.1"
directories        = "6.0.0"
dwn                = { git = "https://github.com/unavi-xyz/dwn" }
dwn-server         = { git = "https://github.com/unavi-xyz/dwn" }
embed-resource     = "3.0.6"
futures            = "0.3.31"
gltf_kun           = { git = "https://github.com/unavi-xyz/gltf_kun" }
image              = { default-features = false, version = "0.25.8" }
semver             = "1.0.27"
serde              = "1.0.228"
serde_json         = "1.0.145"
serde_vrm          = { git = "https://github.com/unavi-xyz/bevy_vrm" }
tarpc              = "0.37.0"
tokio              = "1.48.0"
tokio-serde        = "0.9.0"
tracing            = "0.1.41"
tracing-subscriber = "0.3.20"
tracing-test       = { features = ["no-env-filter"], version = "0.2.5" }
wit-bindgen        = "0.47.0"
wtransport         = "0.6.1"
xdid               = { git = "https://github.com/unavi-xyz/dwn" }
zeroize            = "1.8.2"

[patch.crates-io]
bevy_gltf_kun = { git = "https://github.com/unavi-xyz/gltf_kun" }
bevy_vrm      = { git = "https://github.com/unavi-xyz/bevy_vrm" }
dwn           = { git = "https://github.com/unavi-xyz/dwn" }
dwn-server    = { git = "https://github.com/unavi-xyz/dwn" }
gltf_kun      = { git = "https://github.com/unavi-xyz/gltf_kun" }
xdid          = { git = "https://github.com/unavi-xyz/dwn" }

[profile.release]
lto = "thin"

[profile.release-wasm]
inherits  = "release"
opt-level = "s"

[profile.wasm-dev]
inherits  = "dev"
opt-level = 1

[profile.server-dev]
inherits = "dev"

[profile.android-dev]
inherits = "dev"
